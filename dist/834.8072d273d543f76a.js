"use strict";(self.webpackChunkangular_test_task=self.webpackChunkangular_test_task||[]).push([[834],{4834:(U,f,i)=>{i.r(f),i.d(f,{ProductsPageModule:()=>J});var u=i(6814),m=i(383),t=i(4769),l=i(1374),p=i(6306),a=i(8504),g=i(1438),P=i(2960),C=i(8569);const h=["editProductModalComponent"],v=["confirmModalComponent"];function M(e,c){if(1&e){const o=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"button",8),t.NdJ("click",function(){const d=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.deleteProduct(d._id))}),t.qZA(),t.TgZ(3,"div",9)(4,"h5",10),t._uU(5),t.qZA(),t.TgZ(6,"p",11),t._uU(7),t.qZA(),t.TgZ(8,"div",12)(9,"button",13),t.NdJ("click",function(){const d=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.navigateToProductDetails(d._id))}),t._uU(10,"Product details"),t.qZA(),t.TgZ(11,"button",14),t.NdJ("click",function(){const d=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.openEditModal(d))}),t._uU(12,"Edit product"),t.qZA()()()()()}if(2&e){const o=c.$implicit;t.xp6(5),t.Oqu(o.name),t.xp6(2),t.Oqu(o.description)}}let _=(()=>{class e{constructor(o,n){this.router=o,this.producService=n,this.products=[],this.onProductDelete=new t.vpe,this.onProductUpdate=new t.vpe}ngOnInit(){}deleteProduct(o){this.productId=o,this.confirmModalComponent.openModal()}onConfirmProductDelete(){this.onProductDelete.emit(this.productId)}navigateToProductDetails(o){this.router.navigate([`/product-details/${o}`])}openEditModal(o){this.editProductModalComponent.openEditModal(o)}editProduct(o){const n=this.products.find(d=>d._id===o._id);o.name!==n.name||o.description!==n.description?this.producService.updateProduct(o).pipe((0,l.P)(),(0,p.K)(d=>(this.error=d,(0,a._)(d)))).subscribe(d=>{this.onProductUpdate.emit(d),this.editProductModalComponent.hideModal()}):this.editProductModalComponent.hideModal()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(m.F0),t.Y36(g.M))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-products-list"]],viewQuery:function(o,n){if(1&o&&(t.Gf(h,5),t.Gf(v,5)),2&o){let r;t.iGM(r=t.CRH())&&(n.editProductModalComponent=r.first),t.iGM(r=t.CRH())&&(n.confirmModalComponent=r.first)}},inputs:{products:"products"},outputs:{onProductDelete:"onProductDelete",onProductUpdate:"onProductUpdate"},standalone:!0,features:[t.jDz],decls:6,vars:3,consts:[[1,"row","row-cols-1","row-cols-md-2","row-cols-lg-3","g-4","p-5"],["class","col",4,"ngFor","ngForOf"],[3,"isEditMode","error","onEditProduct"],["editProductModalComponent",""],[3,"onConfirm"],["confirmModalComponent",""],[1,"col"],[1,"card","h-100","d-flex","flex-column","align-items-center"],["type","button","aria-label","Close",1,"btn-close","m-2","align-self-end",3,"click"],[1,"card-body","d-flex","flex-column","justify-content-center","align-items-center","pt-0","h-100","w-100"],[1,"card-title"],[1,"card-text","product-description","text-center"],[1,"col-12","d-flex","justify-content-around","flex-column","flex-lg-row"],["type","button",1,"btn","btn-info",3,"click"],["type","button",1,"btn","btn-warning","mt-2","mt-lg-0",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.YNc(1,M,13,2,"div",1),t.qZA(),t.TgZ(2,"app-product-modal",2,3),t.NdJ("onEditProduct",function(d){return n.editProduct(d)}),t.qZA(),t.TgZ(4,"app-confirm-modal",4,5),t.NdJ("onConfirm",function(){return n.onConfirmProductDelete()}),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngForOf",n.products),t.xp6(1),t.Q6J("isEditMode",!0)("error",n.error))},dependencies:[u.ez,u.sg,P.m,C.z],styles:[".product-description[_ngcontent-%COMP%]{width:100px;overflow:hidden;display:inline-block;text-overflow:ellipsis;white-space:nowrap}"]}),e})();var x=i(7282);const T=["addProductModalComponent"];function b(e,c){1&e&&t._UZ(0,"app-loading-screen")}function Z(e,c){if(1&e&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.hij(" ",o.error," ")}}function y(e,c){if(1&e){const o=t.EpF();t.TgZ(0,"div",4)(1,"h1",5),t._uU(2,"Existing products"),t.qZA(),t.TgZ(3,"app-products-list",6),t.NdJ("onProductDelete",function(r){t.CHM(o);const d=t.oxw();return t.KtG(d.deleteProduct(r))})("onProductUpdate",function(r){t.CHM(o);const d=t.oxw();return t.KtG(d.onUpdateProducts(r))}),t.qZA(),t.YNc(4,Z,2,1,"div",7),t.TgZ(5,"div",8)(6,"button",9),t.NdJ("click",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.openProductModal())}),t._uU(7,"Add product"),t.qZA()()()}if(2&e){const o=t.oxw();t.xp6(3),t.Q6J("products",o.products),t.xp6(1),t.Q6J("ngIf",o.error),t.xp6(2),t.Q6J("disabled",o.products.length>11)}}const A=[{path:"",component:(()=>{class e{constructor(o){this.productService=o,this.products=[],this.loading=(0,t.tdS)(!1)}ngOnInit(){this.loading.set(!0),this.getAllProducts()}openProductModal(){this.addProductModalComponent.openModal()}deleteProduct(o){this.productService.deleteProduct(o).pipe((0,l.P)(),(0,p.K)(n=>(this.error=n,(0,a._)(n)))).subscribe(n=>{this.products=n,this.error=""})}addProduct(o){this.error="",this.productService.createProduct({name:o.name,description:o.description}).pipe((0,l.P)(),(0,p.K)(r=>(this.error=r,(0,a._)(r)))).subscribe(r=>{this.products.push(r),this.addProductModalComponent.hideModal()})}onUpdateProducts(o){this.products=o}getAllProducts(){this.error="",this.productService.getAllProducts().pipe((0,l.P)(),(0,p.K)(o=>(this.error=o,(0,a._)(o)))).subscribe(o=>{this.products=o,this.loading.set(!1)})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(g.M))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-products-page"]],viewQuery:function(o,n){if(1&o&&t.Gf(T,5),2&o){let r;t.iGM(r=t.CRH())&&(n.addProductModalComponent=r.first)}},decls:4,vars:3,consts:[[4,"ngIf"],["class","container mt-5 d-flex flex-column justify-content-center",4,"ngIf"],[3,"error","onAddProduct"],["addProductModalComponent",""],[1,"container","mt-5","d-flex","flex-column","justify-content-center"],[1,"m-auto"],[3,"products","onProductDelete","onProductUpdate"],["class","alert alert-danger col-lg-3 col-md-6 col-sm-8 m-auto mb-2","role","alert",4,"ngIf"],[1,"col-lg-3","col-md-6","col-sm-8","m-auto","mb-4"],["type","button",1,"btn","btn-primary","col-12",3,"disabled","click"],["role","alert",1,"alert","alert-danger","col-lg-3","col-md-6","col-sm-8","m-auto","mb-2"]],template:function(o,n){1&o&&(t.YNc(0,b,1,0,"app-loading-screen",0),t.YNc(1,y,8,3,"div",1),t.TgZ(2,"app-product-modal",2,3),t.NdJ("onAddProduct",function(d){return n.addProduct(d)}),t.qZA()),2&o&&(t.Q6J("ngIf",n.loading()),t.xp6(1),t.Q6J("ngIf",!n.loading()),t.xp6(1),t.Q6J("error",n.error))},dependencies:[u.O5,_,P.m,x.g]}),e})()}];let w=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.Bz.forChild(A),m.Bz]}),e})(),J=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.ez,w,_,P.m]}),e})()}}]);