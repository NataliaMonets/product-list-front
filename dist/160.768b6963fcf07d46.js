"use strict";(self.webpackChunkangular_test_task=self.webpackChunkangular_test_task||[]).push([[160],{2160:(T,p,d)=>{d.r(p),d.d(p,{ProductDetailsModule:()=>b});var m=d(6814),c=d(383),t=d(4769),l=d(1374),u=d(6306),s=d(8504),P=d(1438),f=d(2960),h=d(7282),g=d(8569);const C=["editProductModalComponent"],v=["confirmModalComponent"];function M(e,i){1&e&&t._UZ(0,"app-loading-screen")}function _(e,i){if(1&e&&(t.TgZ(0,"div",19),t._uU(1),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.hij(" ",o.error," ")}}const x=function(){return["/products"]};function y(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div",6)(1,"a",7)(2,"span",8),t._uU(3," keyboard_backspace "),t.qZA(),t._uU(4," Go to all products"),t.qZA(),t.TgZ(5,"div",9)(6,"div",10)(7,"h5",11),t._uU(8),t.qZA()(),t.TgZ(9,"div",12)(10,"p",13),t._uU(11),t.qZA()(),t.TgZ(12,"div",14)(13,"div",15)(14,"button",16),t.NdJ("click",function(){t.CHM(o),t.oxw();const n=t.MAs(5);return t.KtG(n.openModal())}),t._uU(15,"Delete product"),t.qZA(),t.TgZ(16,"button",17),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.openEditModal(n.product))}),t._uU(17,"Edit product"),t.qZA()()()(),t.YNc(18,_,2,1,"div",18),t.qZA()}if(2&e){const o=t.oxw();t.xp6(1),t.Q6J("routerLink",t.DdM(4,x)),t.xp6(7),t.Oqu(o.product.name),t.xp6(3),t.Oqu(o.product.description),t.xp6(7),t.Q6J("ngIf",o.error)}}const D=[{path:"",component:(()=>{class e{constructor(o,r,n){this.producService=o,this.route=r,this.router=n,this.loading=(0,t.tdS)(!1)}ngOnInit(){this.loading.set(!0),this.route.params.subscribe(o=>{this.productId=o.id?o.id:null}),this.getProduct()}openEditModal(o){this.editProductModalComponent.openEditModal(o)}deleteProduct(){this.producService.deleteProduct(this.productId).pipe((0,l.P)(),(0,u.K)(o=>(this.error=o,(0,s._)(o)))).subscribe(()=>{this.router.navigate(["/products"])})}editProduct(o){this.error="",o.name!==this.product?.name||o.description!==this.product?.description?this.producService.updateProduct(o).pipe((0,l.P)(),(0,u.K)(n=>(this.error=n,(0,s._)(n)))).subscribe(n=>{this.product=n.find(a=>a._id===this.productId),this.editProductModalComponent.hideModal()}):this.editProductModalComponent.hideModal()}getProduct(){this.error="",this.producService.getProduct(this.productId).pipe((0,l.P)(),(0,u.K)(o=>(this.error=o,(0,s._)(o)))).subscribe(o=>{this.product=o,this.loading.set(!1)})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(P.M),t.Y36(c.gz),t.Y36(c.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-product-details"]],viewQuery:function(o,r){if(1&o&&(t.Gf(C,5),t.Gf(v,5)),2&o){let n;t.iGM(n=t.CRH())&&(r.editProductModalComponent=n.first),t.iGM(n=t.CRH())&&(r.confirmModalComponent=n.first)}},decls:6,vars:4,consts:[[4,"ngIf"],["class","container mt-5 d-flex flex-column justify-content-center",4,"ngIf"],[3,"isEditMode","error","onEditProduct"],["editProductModalComponent",""],[3,"onConfirm"],["confirmModalComponent",""],[1,"container","mt-5","d-flex","flex-column","justify-content-center"],[1,"link-opacity-75-hover","d-flex","align-items-center","text-decoration-none","back-link",3,"routerLink"],[1,"material-symbols-outlined"],[1,"card","text-center","col-10","col-lg-6","m-auto","mt-5"],[1,"card-header"],[1,"card-title"],[1,"card-body","d-flex","align-items-center","justify-content-center"],[1,"card-text","w-100"],[1,"card-footer","text-body-secondary"],[1,"col-12","d-flex","justify-content-around","flex-column","flex-lg-row"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-warning","mt-2","mt-lg-0",3,"click"],["class","alert alert-danger col-10 col-lg-6 m-auto mt-3","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-danger","col-10","col-lg-6","m-auto","mt-3"]],template:function(o,r){1&o&&(t.YNc(0,M,1,0,"app-loading-screen",0),t.YNc(1,y,19,5,"div",1),t.TgZ(2,"app-product-modal",2,3),t.NdJ("onEditProduct",function(a){return r.editProduct(a)}),t.qZA(),t.TgZ(4,"app-confirm-modal",4,5),t.NdJ("onConfirm",function(){return r.deleteProduct()}),t.qZA()),2&o&&(t.Q6J("ngIf",r.loading()),t.xp6(1),t.Q6J("ngIf",!r.loading()),t.xp6(1),t.Q6J("isEditMode",!0)("error",r.error))},dependencies:[m.O5,c.rH,f.m,h.g,g.z],styles:[".back-link[_ngcontent-%COMP%]{color:#000}.back-link[_ngcontent-%COMP%]:hover{color:#ffc107}.card-body[_ngcontent-%COMP%]{min-height:200px}"]}),e})()}];let Z=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.Bz.forChild(D),c.Bz]}),e})(),b=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,Z,f.m,g.z]}),e})()}}]);